pipeline {
    agent any

    stages {
        stage('test-pipeline') {
            steps {
                echo "test pipeline"
            }
        }
        stage('create Amazon ECR repository'){
			steps{
				echo "Inside creation repo"
				withCredentials([aws(accessKeyVariable: 'AWS_ACCESS_KEY_ID', credentialsId: 'AWS_Creds', secretKeyVariable: 'AWS_SECRET_ACCESS_KEY')]) {
					sh 'aws ecr create-repository --repository-name devops-nxt-repo'
					echo "Successfully created Amazon ECR"
				}
			}        
        }
     }  
}